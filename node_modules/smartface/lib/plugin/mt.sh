rm -f build_i.log
rm -f build.log

xcodebuild -configuration Debug -sdk iphonesimulator > build_i.log

if test $? -eq 0
then
echo "Build successful."
else
grep -r -h -A2 "duplicate " build_i.log > build.log

if [ -s "build.log" ]
then
	foo=$(head -3 'build.log')

	osascript -e 'tell app "Terminal" to display dialog "Duplicate symbols: '"$foo"' \nCheck build.log for details." buttons {"OK"} default button 1 with icon caution with title "Build error"'
else
	osascript -e 'tell app "Terminal" to display dialog "An error occured during build!" buttons {"OK"} default button 1 with icon caution with title "Build error"'
fi

fi

rm -f build_i.log